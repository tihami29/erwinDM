
CREATE TABLE [Apparel_Size]
( 
	[size_id]            CHAR  NOT NULL ,
	[size_code]          CHAR  NULL ,
	[sort_order]         CHAR  NULL ,
	[Product_name]       CHAR  NOT NULL 
)
go

CREATE TABLE [Categories]
( 
	[parent_category_id] CHAR  NULL ,
	[category_name]      CHAR  NULL ,
	[size_id]            CHAR  NOT NULL ,
	[Product_name]       CHAR  NOT NULL ,
	[category_id]        CHAR  NOT NULL 
)
go

CREATE TABLE [Color]
( 
	[color_code]         CHAR  NULL ,
	[color_name]         CHAR  NULL ,
	[color_id]           CHAR  NOT NULL 
)
go

CREATE TABLE [Ent_B_xx]
( 
	[Attr_B_xx]          CHAR  NULL 
)
go

CREATE TABLE [Product]
( 
	[Product_name]       CHAR  NOT NULL ,
	[product_id]         CHAR  NULL ,
	[other_data]         CHAR  NULL 
)
go

CREATE TABLE [Product_Categories]
( 
	[category_id]        CHAR  NOT NULL ,
	[Product_name]       CHAR  NOT NULL 
)
go

CREATE TABLE [Product_Colors]
( 
	[color_id]           CHAR  NOT NULL 
)
go

CREATE TABLE [Product_Product_Colors]
( 
	[Product_name]       CHAR  NOT NULL ,
	[color_id]           CHAR  NOT NULL 
)
go

ALTER TABLE [Apparel_Size]
	ADD CONSTRAINT [XPKApparel_Size] PRIMARY KEY  CLUSTERED ([size_id] ASC,[Product_name] ASC)
go

ALTER TABLE [Apparel_Size]
	ADD CONSTRAINT [XAK1Apparel_Size] UNIQUE ([size_id]  ASC)
go

ALTER TABLE [Categories]
	ADD CONSTRAINT [XPKCategories] PRIMARY KEY  CLUSTERED ([size_id] ASC,[Product_name] ASC,[category_id] ASC)
go

ALTER TABLE [Color]
	ADD CONSTRAINT [XPKColor] PRIMARY KEY  CLUSTERED ([color_id] ASC)
go

ALTER TABLE [Product]
	ADD CONSTRAINT [XPKProduct] PRIMARY KEY  CLUSTERED ([Product_name] ASC)
go

ALTER TABLE [Product]
	ADD CONSTRAINT [XAK1Product] UNIQUE ([Product_name]  ASC)
go

ALTER TABLE [Product_Categories]
	ADD CONSTRAINT [XPKProduct_Categories] PRIMARY KEY  CLUSTERED ([category_id] ASC,[Product_name] ASC)
go

ALTER TABLE [Product_Colors]
	ADD CONSTRAINT [XPKProduct_Colors] PRIMARY KEY  CLUSTERED ([color_id] ASC)
go

ALTER TABLE [Product_Colors]
	ADD CONSTRAINT [XAK1Product_Colors] UNIQUE ([color_id]  ASC)
go

ALTER TABLE [Product_Product_Colors]
	ADD CONSTRAINT [XPKProduct_Product_Colors] PRIMARY KEY  CLUSTERED ([Product_name] ASC,[color_id] ASC)
go


ALTER TABLE [Apparel_Size]
	ADD CONSTRAINT [R_4] FOREIGN KEY ([Product_name]) REFERENCES [Product]([Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


ALTER TABLE [Categories]
	ADD CONSTRAINT [R_1] FOREIGN KEY ([size_id],[Product_name]) REFERENCES [Apparel_Size]([size_id],[Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Categories]
	ADD CONSTRAINT [R_2] FOREIGN KEY ([size_id],[Product_name]) REFERENCES [Apparel_Size]([size_id],[Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Categories]
	ADD CONSTRAINT [R_3] FOREIGN KEY ([size_id]) REFERENCES [Apparel_Size]([size_id])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Categories]
	ADD CONSTRAINT [R_8] FOREIGN KEY ([category_id],[Product_name]) REFERENCES [Product_Categories]([category_id],[Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


ALTER TABLE [Color]
	ADD CONSTRAINT [R_9] FOREIGN KEY ([color_id]) REFERENCES [Product_Colors]([color_id])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


ALTER TABLE [Product_Categories]
	ADD CONSTRAINT [R_5] FOREIGN KEY ([Product_name]) REFERENCES [Product]([Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Product_Categories]
	ADD CONSTRAINT [R_6] FOREIGN KEY ([Product_name]) REFERENCES [Product]([Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


ALTER TABLE [Product_Product_Colors]
	ADD CONSTRAINT [R_7] FOREIGN KEY ([Product_name]) REFERENCES [Product]([Product_name])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Product_Product_Colors]
	ADD CONSTRAINT [R_10] FOREIGN KEY ([color_id]) REFERENCES [Product_Colors]([color_id])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Product_Product_Colors]
	ADD CONSTRAINT [R_11] FOREIGN KEY ([color_id]) REFERENCES [Product_Colors]([color_id])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


CREATE TRIGGER tD_Apparel_Size ON Apparel_Size FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Apparel_Size */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00045dd0", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_3", FK_COLUMNS="size_id" */
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Apparel_Size because Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_2", FK_COLUMNS="size_id""Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Apparel_Size because Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_1", FK_COLUMNS="size_id""Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Apparel_Size because Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Apparel_Size on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Apparel_Size"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_4", FK_COLUMNS="Product_name" */
    IF EXISTS (SELECT * FROM deleted,Product
      WHERE
        /* %JoinFKPK(deleted,Product," = "," AND") */
        deleted.Product_name = Product.Product_name AND
        NOT EXISTS (
          SELECT * FROM Apparel_Size
          WHERE
            /* %JoinFKPK(Apparel_Size,Product," = "," AND") */
            Apparel_Size.Product_name = Product.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Apparel_Size because Product exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Apparel_Size ON Apparel_Size FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Apparel_Size */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @inssize_id CHAR, 
           @insProduct_name CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0004f90f", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_3", FK_COLUMNS="size_id" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(size_id) OR
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Apparel_Size because Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_2", FK_COLUMNS="size_id""Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(size_id) OR
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Apparel_Size because Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_1", FK_COLUMNS="size_id""Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(size_id) OR
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.size_id = deleted.size_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Apparel_Size because Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Apparel_Size on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Apparel_Size"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_4", FK_COLUMNS="Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product
        WHERE
          /* %JoinFKPK(inserted,Product) */
          inserted.Product_name = Product.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Apparel_Size because Product does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Categories ON Categories FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Categories */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product_Categories  Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0005c23b", PARENT_OWNER="", PARENT_TABLE="Product_Categories"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_8", FK_COLUMNS="Product_name""category_id" */
    IF EXISTS (SELECT * FROM deleted,Product_Categories
      WHERE
        /* %JoinFKPK(deleted,Product_Categories," = "," AND") */
        deleted.category_id = Product_Categories.category_id AND
        deleted.Product_name = Product_Categories.Product_name AND
        NOT EXISTS (
          SELECT * FROM Categories
          WHERE
            /* %JoinFKPK(Categories,Product_Categories," = "," AND") */
            Categories.category_id = Product_Categories.category_id AND
            Categories.Product_name = Product_Categories.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Categories because Product_Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_3", FK_COLUMNS="size_id" */
    IF EXISTS (SELECT * FROM deleted,Apparel_Size
      WHERE
        /* %JoinFKPK(deleted,Apparel_Size," = "," AND") */
        deleted.size_id = Apparel_Size.size_id AND
        NOT EXISTS (
          SELECT * FROM Categories
          WHERE
            /* %JoinFKPK(Categories,Apparel_Size," = "," AND") */
            Categories.size_id = Apparel_Size.size_id
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Categories because Apparel_Size exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_2", FK_COLUMNS="size_id""Product_name" */
    IF EXISTS (SELECT * FROM deleted,Apparel_Size
      WHERE
        /* %JoinFKPK(deleted,Apparel_Size," = "," AND") */
        deleted.size_id = Apparel_Size.size_id AND
        deleted.Product_name = Apparel_Size.Product_name AND
        NOT EXISTS (
          SELECT * FROM Categories
          WHERE
            /* %JoinFKPK(Categories,Apparel_Size," = "," AND") */
            Categories.size_id = Apparel_Size.size_id AND
            Categories.Product_name = Apparel_Size.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Categories because Apparel_Size exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Apparel_Size  Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_1", FK_COLUMNS="size_id""Product_name" */
    IF EXISTS (SELECT * FROM deleted,Apparel_Size
      WHERE
        /* %JoinFKPK(deleted,Apparel_Size," = "," AND") */
        deleted.size_id = Apparel_Size.size_id AND
        deleted.Product_name = Apparel_Size.Product_name AND
        NOT EXISTS (
          SELECT * FROM Categories
          WHERE
            /* %JoinFKPK(Categories,Apparel_Size," = "," AND") */
            Categories.size_id = Apparel_Size.size_id AND
            Categories.Product_name = Apparel_Size.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Categories because Apparel_Size exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Categories ON Categories FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Categories */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @inssize_id CHAR, 
           @insProduct_name CHAR, 
           @inscategory_id CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product_Categories  Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0006011c", PARENT_OWNER="", PARENT_TABLE="Product_Categories"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_8", FK_COLUMNS="Product_name""category_id" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(category_id) OR
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product_Categories
        WHERE
          /* %JoinFKPK(inserted,Product_Categories) */
          inserted.category_id = Product_Categories.category_id and
          inserted.Product_name = Product_Categories.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Categories because Product_Categories does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_3", FK_COLUMNS="size_id" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(size_id)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Apparel_Size
        WHERE
          /* %JoinFKPK(inserted,Apparel_Size) */
          inserted.size_id = Apparel_Size.size_id
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Categories because Apparel_Size does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_2", FK_COLUMNS="size_id""Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(size_id) OR
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Apparel_Size
        WHERE
          /* %JoinFKPK(inserted,Apparel_Size) */
          inserted.size_id = Apparel_Size.size_id and
          inserted.Product_name = Apparel_Size.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Categories because Apparel_Size does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Apparel_Size  Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Apparel_Size"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_1", FK_COLUMNS="size_id""Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(size_id) OR
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Apparel_Size
        WHERE
          /* %JoinFKPK(inserted,Apparel_Size) */
          inserted.size_id = Apparel_Size.size_id and
          inserted.Product_name = Apparel_Size.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Categories because Apparel_Size does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Color ON Color FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Color */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product_Colors  Color on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0001594a", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Color"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_9", FK_COLUMNS="color_id" */
    IF EXISTS (SELECT * FROM deleted,Product_Colors
      WHERE
        /* %JoinFKPK(deleted,Product_Colors," = "," AND") */
        deleted.color_id = Product_Colors.color_id AND
        NOT EXISTS (
          SELECT * FROM Color
          WHERE
            /* %JoinFKPK(Color,Product_Colors," = "," AND") */
            Color.color_id = Product_Colors.color_id
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Color because Product_Colors exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Color ON Color FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Color */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @inscolor_id CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product_Colors  Color on child update no action */
  /* ERWIN_RELATION:CHECKSUM="000172ec", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Color"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_9", FK_COLUMNS="color_id" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product_Colors
        WHERE
          /* %JoinFKPK(inserted,Product_Colors) */
          inserted.color_id = Product_Colors.color_id
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Color because Product_Colors does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Product ON Product FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Product */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product  Product_Product_Colors on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0004249d", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_7", FK_COLUMNS="Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product because Product_Product_Colors exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Product_Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_6", FK_COLUMNS="Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Product_Categories
      WHERE
        /*  %JoinFKPK(Product_Categories,deleted," = "," AND") */
        Product_Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product because Product_Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Product_Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_5", FK_COLUMNS="Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Product_Categories
      WHERE
        /*  %JoinFKPK(Product_Categories,deleted," = "," AND") */
        Product_Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product because Product_Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Apparel_Size on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Apparel_Size"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_4", FK_COLUMNS="Product_name" */
    IF EXISTS (
      SELECT * FROM deleted,Apparel_Size
      WHERE
        /*  %JoinFKPK(Apparel_Size,deleted," = "," AND") */
        Apparel_Size.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product because Apparel_Size exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Product ON Product FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Product */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insProduct_name CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product  Product_Product_Colors on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00048ee5", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_7", FK_COLUMNS="Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product because Product_Product_Colors exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Product_Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_6", FK_COLUMNS="Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Product_Categories
      WHERE
        /*  %JoinFKPK(Product_Categories,deleted," = "," AND") */
        Product_Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product because Product_Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Product_Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_5", FK_COLUMNS="Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Product_Categories
      WHERE
        /*  %JoinFKPK(Product_Categories,deleted," = "," AND") */
        Product_Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product because Product_Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Apparel_Size on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Apparel_Size"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_4", FK_COLUMNS="Product_name" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Apparel_Size
      WHERE
        /*  %JoinFKPK(Apparel_Size,deleted," = "," AND") */
        Apparel_Size.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product because Apparel_Size exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Product_Categories ON Product_Categories FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Product_Categories */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product_Categories  Categories on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003bfea", PARENT_OWNER="", PARENT_TABLE="Product_Categories"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_8", FK_COLUMNS="Product_name""category_id" */
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.category_id = deleted.category_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product_Categories because Categories exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Product_Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_6", FK_COLUMNS="Product_name" */
    IF EXISTS (SELECT * FROM deleted,Product
      WHERE
        /* %JoinFKPK(deleted,Product," = "," AND") */
        deleted.Product_name = Product.Product_name AND
        NOT EXISTS (
          SELECT * FROM Product_Categories
          WHERE
            /* %JoinFKPK(Product_Categories,Product," = "," AND") */
            Product_Categories.Product_name = Product.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Product_Categories because Product exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Product_Categories on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_5", FK_COLUMNS="Product_name" */
    IF EXISTS (SELECT * FROM deleted,Product
      WHERE
        /* %JoinFKPK(deleted,Product," = "," AND") */
        deleted.Product_name = Product.Product_name AND
        NOT EXISTS (
          SELECT * FROM Product_Categories
          WHERE
            /* %JoinFKPK(Product_Categories,Product," = "," AND") */
            Product_Categories.Product_name = Product.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Product_Categories because Product exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Product_Categories ON Product_Categories FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Product_Categories */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @inscategory_id CHAR, 
           @insProduct_name CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product_Categories  Categories on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00040a17", PARENT_OWNER="", PARENT_TABLE="Product_Categories"
    CHILD_OWNER="", CHILD_TABLE="Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_8", FK_COLUMNS="Product_name""category_id" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(category_id) OR
    UPDATE(Product_name)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Categories
      WHERE
        /*  %JoinFKPK(Categories,deleted," = "," AND") */
        Categories.category_id = deleted.category_id AND
        Categories.Product_name = deleted.Product_name
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product_Categories because Categories exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Product_Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_6", FK_COLUMNS="Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product
        WHERE
          /* %JoinFKPK(inserted,Product) */
          inserted.Product_name = Product.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Product_Categories because Product does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Product_Categories on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Categories"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_5", FK_COLUMNS="Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product
        WHERE
          /* %JoinFKPK(inserted,Product) */
          inserted.Product_name = Product.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Product_Categories because Product does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Product_Colors ON Product_Colors FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Product_Colors */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product_Colors  Product_Product_Colors on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00033631", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_11", FK_COLUMNS="color_id" */
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product_Colors because Product_Product_Colors exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product_Colors  Product_Product_Colors on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_10", FK_COLUMNS="color_id" */
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product_Colors because Product_Product_Colors exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product_Colors  Color on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Color"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_9", FK_COLUMNS="color_id" */
    IF EXISTS (
      SELECT * FROM deleted,Color
      WHERE
        /*  %JoinFKPK(Color,deleted," = "," AND") */
        Color.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Product_Colors because Color exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Product_Colors ON Product_Colors FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Product_Colors */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @inscolor_id CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product_Colors  Product_Product_Colors on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0003743e", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_11", FK_COLUMNS="color_id" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product_Colors because Product_Product_Colors exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product_Colors  Product_Product_Colors on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_10", FK_COLUMNS="color_id" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Product_Product_Colors
      WHERE
        /*  %JoinFKPK(Product_Product_Colors,deleted," = "," AND") */
        Product_Product_Colors.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product_Colors because Product_Product_Colors exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product_Colors  Color on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Color"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_9", FK_COLUMNS="color_id" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Color
      WHERE
        /*  %JoinFKPK(Color,deleted," = "," AND") */
        Color.color_id = deleted.color_id
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Product_Colors because Color exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_Product_Product_Colors ON Product_Product_Colors FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Product_Product_Colors */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Product_Colors  Product_Product_Colors on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00043f63", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_11", FK_COLUMNS="color_id" */
    IF EXISTS (SELECT * FROM deleted,Product_Colors
      WHERE
        /* %JoinFKPK(deleted,Product_Colors," = "," AND") */
        deleted.color_id = Product_Colors.color_id AND
        NOT EXISTS (
          SELECT * FROM Product_Product_Colors
          WHERE
            /* %JoinFKPK(Product_Product_Colors,Product_Colors," = "," AND") */
            Product_Product_Colors.color_id = Product_Colors.color_id
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Product_Product_Colors because Product_Colors exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product_Colors  Product_Product_Colors on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_10", FK_COLUMNS="color_id" */
    IF EXISTS (SELECT * FROM deleted,Product_Colors
      WHERE
        /* %JoinFKPK(deleted,Product_Colors," = "," AND") */
        deleted.color_id = Product_Colors.color_id AND
        NOT EXISTS (
          SELECT * FROM Product_Product_Colors
          WHERE
            /* %JoinFKPK(Product_Product_Colors,Product_Colors," = "," AND") */
            Product_Product_Colors.color_id = Product_Colors.color_id
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Product_Product_Colors because Product_Colors exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Product  Product_Product_Colors on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_7", FK_COLUMNS="Product_name" */
    IF EXISTS (SELECT * FROM deleted,Product
      WHERE
        /* %JoinFKPK(deleted,Product," = "," AND") */
        deleted.Product_name = Product.Product_name AND
        NOT EXISTS (
          SELECT * FROM Product_Product_Colors
          WHERE
            /* %JoinFKPK(Product_Product_Colors,Product," = "," AND") */
            Product_Product_Colors.Product_name = Product.Product_name
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Product_Product_Colors because Product exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


CREATE TRIGGER tU_Product_Product_Colors ON Product_Product_Colors FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Product_Product_Colors */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insProduct_name CHAR, 
           @inscolor_id CHAR,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Product_Colors  Product_Product_Colors on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00044b08", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_11", FK_COLUMNS="color_id" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product_Colors
        WHERE
          /* %JoinFKPK(inserted,Product_Colors) */
          inserted.color_id = Product_Colors.color_id
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Product_Product_Colors because Product_Colors does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product_Colors  Product_Product_Colors on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product_Colors"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_10", FK_COLUMNS="color_id" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(color_id)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product_Colors
        WHERE
          /* %JoinFKPK(inserted,Product_Colors) */
          inserted.color_id = Product_Colors.color_id
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Product_Product_Colors because Product_Colors does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Product  Product_Product_Colors on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="", PARENT_TABLE="Product"
    CHILD_OWNER="", CHILD_TABLE="Product_Product_Colors"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_7", FK_COLUMNS="Product_name" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(Product_name)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Product
        WHERE
          /* %JoinFKPK(inserted,Product) */
          inserted.Product_name = Product.Product_name
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Product_Product_Colors because Product does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go


